<HEAD>
<TITLE>Documentation of the module mxml</TITLE>

<META NAME="description" CONTENT="Documentation of the module mxml: Table of Contents">
<META NAME="keywords" CONTENT="Documentation of the module mxml: Table of Contents">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="t2h.pl">

</HEAD>

<BODY LANG="" BGCOLOR="#C7C1A7" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<FONT FACE="Verdana" Size="2">

<H1>Documentation of the module mxml</H1>
<H3>by Peter Verhas</H3>
<A NAME="contents"><H2>Table of Contents</H2></A>
<UL>
<A HREF="#1.">1.   Introduction</A><BR>
<A HREF="#2.">2.   Load an XML file and read into memory</A><BR>
<A HREF="#3.">3.   Get the next node of a document node</A><BR>
<A HREF="#4.">4.   Get the next Child node of a document node</A><BR>
<A HREF="#5.">5.   Get the value of a document node</A><BR>
<A HREF="#6.">6.   Get the a property value of a document node</A><BR>
<A HREF="#7.">7.   Get a handle to a specified node</A><BR>
<A HREF="#8.">8.   Save to an XML file</A><BR>
<A HREF="#9.">9.   Create a new XML document in memory</A><BR>
<A HREF="#10.">10.   Releases/Destroys an XML tree in memory</A><BR>
</UL>
<P><a href="#contents">[Contents]</A><BR>
<P>
<A name="1."><H1>1. Introduction</H1></A>

<P><a href="#contents">[Contents]</A><BR>
<P>
<A name="2."><H1>2. Load an XML file and read into memory</H1></A>

You should use this function to read the content of an XML file into memory.
The argument of the function is the name of the file to be read. The function
will return a handle to the structure created during the parsing of the file
content.
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 DOC = mxml::LoadDoc("my_file.xml")
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="3."><H1>3. Get the next node of a document node</H1></A>

This function should be used to get the handle to the  next node in a
document node
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 node = mxml::GetNext(&lt;node pointer&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="4."><H1>4. Get the next Child node of a document node</H1></A>

This function should be used to get the handle to the next Childe node of a
document node
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 node = mxml::GetChild(&lt;node pointer&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="5."><H1>5. Get the value of a document node</H1></A>

This function should be used to get the value (text) of a node
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 text = mxml::GetNodeValue(&lt;node pointer&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="6."><H1>6. Get the a property value of a document node</H1></A>

This function should be used to get the
value of a property of a document node
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 text = mxml:: mxml::GetProperty(&lt;node pointer&gt;,&lt;string identifier&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="7."><H1>7. Get a handle to a specified node</H1></A>

This function should be used to get the handle of a specific node.
It uses XPATH syntax, which resembles a UNIX path.
<P>
Ex, node = mxml::GetNode(doc, "/stufflist/stuff_test3/painting/img")
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 node = mxml::GetNode(&lt;node pointer&gt;,&lt;path-like string&gt;)
</PRE></FONT>
*/    
besFUNCTION(GetNode)
    mxml_node_t *rootNode, *node;
    char *pszValue;
    char *token, tmpStr[_MAX_PATH];
<P>
    besARGUMENTS("pz")
    &amp;rootNode,&amp;pszValue
  besARGEND    
    
    node = rootNode;
<P>
    memset(tmpStr,0,sizeof(tmpStr));
    strncpy(tmpStr, pszValue, strlen(pszValue));
    
<P>
    token = strtok(tmpStr, "/");
  while ( token  ) {
        node = mxmlFindElement(node,node,token,NULL,NULL,MXML_DESCEND);
    token = strtok( NULL, "/" );
  }
        
    besRETURN_POINTER(node);
besEND
<P>
/**<P><a href="#contents">[Contents]</A><BR>
<P>
<A name="8."><H1>8. Save to an XML file</H1></A>

This function should be used to save the contents of an XML tree
to a disk file
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 mxml::SaveDoc(&lt;DOC (root) node pointer&gt;,&lt;string filename&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="9."><H1>9. Create a new XML document in memory</H1></A>

This function should be used to create a new XML document in memory.
<P>
The second parameter (xml version) is optional.  If not provided,
it defaults to version="1.0"
<P>
It would create a header that looks like:
    &lt;?xml version="1.0"&gt;
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 doc = mxml::NewDoc(&lt;string version&gt;)
</PRE></FONT><P><a href="#contents">[Contents]</A><BR>
<P>
<A name="10."><H1>10. Releases/Destroys an XML tree in memory</H1></A>

This function should be used to delete an new XML document in memory.
<P>
<FONT SIZE="3" COLOR="BLUE"><PRE>
 mxml::FreeDoc(&lt;doc pointer&gt;)
</PRE></FONT>
 